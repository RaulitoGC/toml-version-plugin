# Library Versions Catalog Plugin

A Gradle settings plugin that automatically creates and manages a curated version catalog (libs.versions.toml) for Android projects, preventing sync issues by running during the settings evaluation phase.

## ğŸš€ Features

- **Automatic TOML Creation**: Creates the TOML file during settings evaluation (before Gradle sync)
- **Zero Sync Issues**: Prevents "variable not found" errors by ensuring TOML exists before project configuration
- **Curated Versions**: Pre-selected stable versions of popular Android libraries
- **Version Catalog Auto-Configuration**: Automatically sets up the version catalog in your project
- **No Manual Steps**: Works immediately after applying the plugin

## ğŸ”§ Installation

Add the plugin to your `settings.gradle.kts`:

```kotlin
// settings.gradle.kts
pluginManagement {
    repositories {
        mavenLocal()        // Required for locally published plugins
        google()
        mavenCentral()
        gradlePluginPortal()
    }
}

plugins {
    id("com.example.catalog-plugin") version "1.1.4"
}
```

That's it! The plugin will:
1. Create `gradle/libs.versions.toml` if it doesn't exist
2. Configure the version catalog automatically
3. Make all library versions available for use

## ğŸ¯ Usage

After applying the plugin, use the version catalog in your dependencies:

```kotlin
// build.gradle.kts (app module)
plugins {
    alias(libs.plugins.android.application)
    alias(libs.plugins.kotlin.android)
}

dependencies {
    implementation(libs.androidx.core.ktx)
    implementation(libs.androidx.appcompat)
    implementation(libs.material)
    implementation(libs.androidx.constraintlayout)
    implementation(libs.retrofit)
    implementation(libs.androidx.room.runtime)
    
    testImplementation(libs.junit)
    androidTestImplementation(libs.androidx.test.ext.junit)
}
```

## ğŸ“¦ Included Libraries

The bundled TOML file includes versions for:

### Core Android
- AndroidX Core, AppCompat, Activity, Fragment
- Material Design Components
- ConstraintLayout, RecyclerView, CardView

### Architecture Components  
- Lifecycle, ViewModel, LiveData
- Navigation Components
- Room Database
- DataStore

### Networking
- Retrofit with Gson converter
- OkHttp with logging interceptor
- Gson

### Image Loading
- Glide with compiler
- Coil

### Dependency Injection
- Hilt Android with compiler
- Dagger with compiler

### Async Programming
- Kotlin Coroutines (Core & Android)
- RxJava 3

### Testing
- JUnit
- AndroidX Test
- Espresso
- Mockito
- Robolectric

### Build Tools
- Android Gradle Plugin
- Kotlin
- Detekt
- KtLint

## ğŸ“ Project Structure After Plugin Application

```
your-android-project/
â”œâ”€â”€ settings.gradle.kts       # Apply plugin here
â”œâ”€â”€ gradle/
â”‚   â””â”€â”€ libs.versions.toml    # Auto-generated by plugin
â”œâ”€â”€ build.gradle.kts          
â””â”€â”€ app/
    â””â”€â”€ build.gradle.kts      # Use libs.* dependencies
```

## ğŸš€ Building and Publishing

### Step 1: Update Version
```kotlin
// In build.gradle.kts
version = "1.1.5"  // Increment version
```

### Step 2: Publish Locally
```bash
./gradlew publishToMavenLocal
```

### Step 3: Use New Version
Update version in your Android project's `settings.gradle.kts`.

## ğŸ¯ Benefits

- **No Sync Errors**: TOML file exists before Gradle evaluates any dependencies
- **Zero Configuration**: Just apply the plugin and start using it
- **Always Up-to-Date**: Plugin ensures TOML file matches the bundled version
- **Type Safety**: Full IDE support with auto-completion
- **Centralized Versions**: All library versions in one place

## ğŸ“ How It Works

1. **Settings Phase**: Plugin runs during Gradle's settings evaluation
2. **File Check**: Checks if `gradle/libs.versions.toml` exists
3. **Auto Creation**: If missing, creates it from the bundled template
4. **Catalog Setup**: Configures the version catalog for the project
5. **Ready to Use**: All `libs.*` references are available immediately

## ğŸ” Troubleshooting

### Plugin Not Found

Ensure `mavenLocal()` is in your `pluginManagement` repositories:

```kotlin
pluginManagement {
    repositories {
        mavenLocal()  // Must be included
        google()
        mavenCentral()
        gradlePluginPortal()
    }
}
```

### Version Catalog Not Available

The plugin automatically configures the version catalog. If you have custom catalog configuration, the plugin will respect it and only create the TOML file.

## ğŸ“„ License

This plugin is provided as-is for managing Android library versions.